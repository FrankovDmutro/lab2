# Документація до проєкту: Перевірка приналежності точки трикутнику

Цей проєкт складається з трьох файлів:
- **main.cpp** — взаємодія з користувачем, меню вибору.
- **geometry.h** — оголошення структур та функцій.
- **geometry.cpp** — реалізація методів та алгоритмів.

---

## Структура файлів

```text
├── main.cpp
├── geometry.h
└── geometry.cpp
```

---

## Опис файлів

### main.cpp
- Зчитує координати трикутника та точки.
- Перевіряє, чи існує трикутник.
- Надає меню для вибору методу перевірки:
  1. Метод Герона
  2. Метод детермінанту (векторний добуток)
  3. Обидва методи
- Після виконання пропонує змінити трикутник, точку або завершити роботу.

### geometry.h
- Оголошує структуру **Point** з полями `x, y` та методом `read()`.
- Оголошує структуру **Triangle** з вершинами `A, B, C` та методами:
  - `read()`
  - `exists()`, `existsBySides()`, `existsByArea()`
  - `areaHeron()`, `areaDeterminant()`
- Прототипи допоміжних функцій:
  - `distance()`, `area()`, `onSegment()`
  - `methodByHeron()`, `methodByAreaFormula()`

### geometry.cpp
- Реалізує зчитування (`Point::read()`, `Triangle::read()`).
- Перевірку існування трикутника:
  - За довжинами сторін (`existsBySides`): **\(a + b > c\), \(a + c > b\), \(b + c > a\)**
  - За невиродженістю (векторний добуток — `existsByArea`): **\(\lvert (B-A) \times (C-A) \rvert > arepsilon\)**
- Обчислення площ:
  - **Герон** (`areaHeron`)
  - **Детермінант** (`areaDeterminant`)
- Функція `onSegment` — перевірка, чи точка лежить на відрізку.
- Методи перевірки приналежності точки:
  - `methodByHeron`
  - `methodByAreaFormula`

---

## Детальний опис алгоритмів

### Метод Герона (через площі)

1. **Обчислення довжин сторін**  
   Для трикутника \(ABC\):
   \[
     a = |BC| = \sqrt{(C_x - B_x)^2 + (C_y - B_y)^2},\
     b = |AC| = \sqrt{(C_x - A_x)^2 + (C_y - A_y)^2},\
     c = |AB| = \sqrt{(B_x - A_x)^2 + (B_y - A_y)^2}.
   \]

2. **Перевірка нерівностей трикутника**  
   Перш ніж рахувати площу, перевіряємо:
   \[
     a + b > c,\quad a + c > b,\quad b + c > a.
   \]
   Якщо хоч одне з них не виконується, трикутник вироджений або не існує.

3. **Півпериметр**  
   \[
     p = rac{a + b + c}{2}.
   \]

4. **Площа за Героном**  
   \[
     S = \sqrt{p(p - a)(p - b)(p - c)}.
   \]
   Якщо підкореневий вираз \((p - a)(p - b)(p - c)\) негативний (через округлення) — вважаємо \(S = 0\).

5. **Площі підтрикутників з точкою \(P\)**  
   Аналогічно обчислюємо:
   \[
     S_1 = \sqrt{p_1(p_1 - a_1)(p_1 - b_1)(p_1 - c_1)},\quad
     S_2, \quad S_3,
   \]
   де \(p_i\) — півпериметр трикутників \(PBC\), \(PCA\), \(PAB\).

6. **Умова належності**  
   Введемо мале \(arepsilon\) (наприклад, \(10^{-9}\)):
   - **Всередині або на межі** якщо  
     \(\lvert (S_1 + S_2 + S_3) - S 
vert < arepsilon.\)
   - **На межі** якщо додатково хоча б одне \(S_i < arepsilon\) **та** точка лежить на відповідному відрізку (перевірка `onSegment`).
   - **Зовні** інакше.

---

### Метод векторного добутку (детермінант)

1. **Вектори від вершин до точки**  
   Для кожної сторони, наприклад \(AB\):
   \[
     ec{v} = B - A = (B_x - A_x,\; B_y - A_y),\
     ec{w} = P - A = (P_x - A_x,\; P_y - A_y).
   \]

2. **Векторний добуток у 2D**  
   \[
     	ext{cross}_1 = ec{v}_x \cdot ec{w}_y - ec{v}_y \cdot ec{w}_x.
   \]
   Аналогічно \(	ext{cross}_2\) для сторони \(BC\) і \(	ext{cross}_3\) для \(CA\).

3. **Умова всередині**  
   - Якщо всі \(	ext{cross}_i > arepsilon\) **або** всі \(	ext{cross}_i < -arepsilon\), точка всередині.
4. **Умова на межі**  
   - Якщо будь‑який \(\lvert 	ext{cross}_i
vert < arepsilon\) **і** `onSegment` для відповідної сторони → точка на межі.
5. **Інакше**  
   - Точка ззовні.

---

## Функція `onSegment(U, V, P)`

Перевіряє, чи лежить \(P\) на відрізку \(UV\):

1. **Колінеарність**:  
   \[
     	ext{cross} = (V_x - U_x)(P_y - U_y) - (V_y - U_y)(P_x - U_x),\
     \lvert 	ext{cross}
vert < arepsilon.
   \]
2. **Координатний “короб”**:  
   \[
     \min(U_x, V_x) - arepsilon \le P_x \le \max(U_x, V_x) + arepsilon,\
     \min(U_y, V_y) - arepsilon \le P_y \le \max(U_y, V_y) + arepsilon.
   \]

---

## Умови виклику методів

- **methodByHeron**: викликається тільки якщо `existsBySides()` → трикутник за довжинами валідний.
- **methodByAreaFormula**: викликається тільки якщо `existsByArea()` → трикутник не вироджений.

---

## Як зібрати

```bash
g++ main.cpp geometry.cpp -o triangle_check
./triangle_check
```

---

## Автор

> Франков Дмитро, студент ФЕКТ, 2025
